def credentialsId = "qtechsavy"
def gitRepo = 'git@github.com:qtechsavy/test-101.git'
//node('') {
  stage('Checkout Source') {
    // Get Source Code from SCM (Git) as configured in the Jenkins Project
    // Next line for inline script, "checkout scm" for Jenkinsfile from Gogs
    //git url: "${gitRepo}", credentialsId: "${credentialsId}"
    checkout scm
  }
  
  stage('Moving the zip folder') {
    mv ./datapower-local-dev/validation-flow.zip ./datapower-operator-scripts-autogenerate/
  }
  
  stage('OCP Login') {
    //oc login --token=sha256~ACEhkfBnZ4a6LmAM6RQEGKWCusvJ8QYA4ocDySIjPpk --server=https://c100-e.eu-gb.containers.cloud.ibm.com:31647
    oc status
  }
  
  stage('Deploying DataPower Services') {
    //install catalog operator
    oc apply -f ./datapower-operator-scripts-autogenerate/ibm-catalog-source.yaml
    
    //install DataPower Operator
    oc apply -f ./datapower-operator-scripts-autogenerate/ibm-datapower-operator-catalog.yaml
  }
//}
